<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<body>
    <ui:composition template="/WEB-INF/templates/AdminTemplate.xhtml">
        <ui:param name="title" value="Edit firewall zone"/>

        <ui:define name="content">
            <h:form id="formEditFirewallEntry">
                <p:fragment autoUpdate="true">
                    <p:dialog header="#{editFirewallSettings.editingMode} #{editFirewallSettings.editingChain} chain"
                              id="dlgEditFirewallEntry"
                              widgetVar="dlgEditFirewallEntry">
                        <h:panelGrid columns="2">
                                <p:outputLabel value="Label:" for="label"/>
                                <p:inputText value="#{editFirewallSettings.editingEntry.label}"
                                             id="label"/>

                                <p:outputLabel value="Description:"/>
                                <p:inputText value="#{editFirewallSettings.editingEntry.description}"
                                             id="description"/>

                                <p:outputLabel value="Is active:" for="isActive"/>
                                <p:inputSwitch offLabel="no" onLabel="yes"
                                               value="#{editFirewallSettings.editingEntry.isActive}"
                                               id="isActive"/>
                        </h:panelGrid>

                        <p:panelGrid>
                            <p:row>
                                <p:column>
                                    <p:dataList var="who" value="#{editFirewallSettings.editingEntry.whos}">
                                        <f:facet name="who">
                                            Who
                                        </f:facet>
                                        <h:outputText value="#{who}"/>
                                    </p:dataList>
                                </p:column>
                                <p:column>
                                    <p:dataTable var="target" value="#{editFirewallSettings.editingEntry.targets}">
                                        <p:column headerText="Network" width="15em">
                                            <h:outputText value="#{target.network}"/>
                                        </p:column>
                                        <p:column headerText="Ports" width="11em">
                                            <h:outputText value="#{target.ports}"/>
                                        </p:column>
                                        <p:column headerText="Protocol" width="3em">
                                            <h:outputText value="#{targer.protocol}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:commandButton value="New"/>
                                    <p:commandButton value="Edit"/>
                                    <p:commandButton value="Delete"/>
                                </p:column>
                                <p:column>
                                    <p:commandButton value="New"/>
                                    <p:commandButton value="Edit"/>
                                    <p:commandButton value="Delete"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>

                        <p:commandButton value="OK"
                                         action="#{editFirewallSettings.onEditEntryOk}"
                                         />
                        <p:commandButton value="Cancel"
                                         action="#{editFirewallSettings.onEditEntryCancel}"/>
                    </p:dialog>
                </p:fragment>
            </h:form>

            <h:form id="firewallZoneForm">
                <p:accordionPanel>
                    <p:tab title="Incomping">
                        <p:dataTable value="#{firewallSettings.incomingEntries}"
                                     var="entry">
                            <p:column headerText="Label">
                                <h:outputText value="#{entry.label}"/>
                            </p:column>
                            <p:column headerText="Is Active">
                                <h:outputText value="#{entry.isActive}"/>
                            </p:column>
                            <p:column headerText="Who">
                                <h:outputText value="#{entry.who}"/>
                            </p:column>
                            <p:column headerText="Target">
                                <h:outputText value="#{entry.target}"/>
                            </p:column>
                            <p:column headerText="Description">
                                <h:outputText value="#{entry.description}"/>
                            </p:column>
                        </p:dataTable>

                        <p:commandButton
                            action="#{editFirewallSettings.onNewIncomingEntry}"
                            value="New..."
                            ajax="true"
                            update=":formEditFirewallEntry:dlgEditFirewallEntry"
                            />
                        <p:commandButton
                            action="#{editFirewallSettings.onCloneIncomingEntry}"
                            value="Clone..."
                            disabled="#{editFirewallSettings.sekectedIncomingEntry == null}"
                            />
                        <p:commandButton
                            action="#{editFirewallSettings.onEditIncomingEntry}"
                            disabled="#{editFirewallSettings.sekectedIncomingEntry == null}"
                            value="Edit..."
                            />
                        <p:commandButton
                            action="#{editFirewallSettings.onRemoveIncomingEntry}"
                            disabled="#{editFirewallSettings.sekectedIncomingEntry == null}"
                            value="Remove"/>
                    </p:tab>

                    <p:tab title="Outgoing">

                    </p:tab>
                </p:accordionPanel>
            </h:form>
        </ui:define>
    </ui:composition>
</body>
</html>
