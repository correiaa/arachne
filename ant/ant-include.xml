<?xml version="1.0" encoding="UTF-8"?>

<project name="custom">
    <target name="prepare-doc">
        <mkdir dir="${docdst.dir}"/>
        <mkdir dir="${docdst.dir}/pics"/>
        <copy todir="${docdst.dir}/pics">
            <fileset dir="${docsrc.dir}/pics"/>
        </copy>
        <copy todir="${docdst.dir}"
              file="${docsrc.dir}/arachne.css"
              />
    </target>
    
    <target name="doc-internal" depends="prepare-doc">        
        <xslt basedir="${docsrc.dir}"
            in="${docsrc.dir}/arachne.xml" destdir="${docdst.dir}"
                includes="*xml"
              style="/usr/share/sgml/docbook/xsl-ns-stylesheets/xhtml5/chunk.xsl"
              >
            <param name="html.stylesheet" expression="arachne.css"/>
        </xslt>
    </target>
    
    <target name="doc-external" depends="prepare-doc">
        <echo message="Creating doc from ${docsrc.dir} to ${docdst.dir}"/>
        <exec executable="/usr/bin/xsltproc" failonerror="true">
            <arg value="--output"/> 
            <arg value="${docdst.dir}/"/>
            
            <arg value="--stringparam"/>  
            <arg value="html.stylesheet"/> 
            <arg value="arachne.css"/>
            
            <arg value="${docbook-stylesheet}"/>
            <arg value="${docsrc.dir}/arachne.xml"/>
        </exec>
    </target>
    
    <target name="doc" depends="doc-external">
    </target>
</project>
